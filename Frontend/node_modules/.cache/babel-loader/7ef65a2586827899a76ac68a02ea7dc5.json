{"ast":null,"code":"function _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nimport * as React from 'react';\nimport { polyfill } from 'react-lifecycles-compat';\nimport ClearableLabeledInput from './ClearableLabeledInput';\nimport ResizableTextArea from './ResizableTextArea';\nimport { ConfigConsumer } from '../config-provider';\nimport { fixControlledValue, resolveOnChange } from './Input';\n\nvar TextArea = /*#__PURE__*/function (_React$Component) {\n  _inherits(TextArea, _React$Component);\n\n  function TextArea(props) {\n    var _this;\n\n    _classCallCheck(this, TextArea);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TextArea).call(this, props));\n\n    _this.saveTextArea = function (resizableTextArea) {\n      _this.resizableTextArea = resizableTextArea;\n    };\n\n    _this.saveClearableInput = function (clearableInput) {\n      _this.clearableInput = clearableInput;\n    };\n\n    _this.handleChange = function (e) {\n      _this.setValue(e.target.value, function () {\n        _this.resizableTextArea.resizeTextarea();\n      });\n\n      resolveOnChange(_this.resizableTextArea.textArea, e, _this.props.onChange);\n    };\n\n    _this.handleKeyDown = function (e) {\n      var _this$props = _this.props,\n          onPressEnter = _this$props.onPressEnter,\n          onKeyDown = _this$props.onKeyDown;\n\n      if (e.keyCode === 13 && onPressEnter) {\n        onPressEnter(e);\n      }\n\n      if (onKeyDown) {\n        onKeyDown(e);\n      }\n    };\n\n    _this.handleReset = function (e) {\n      _this.setValue('', function () {\n        _this.resizableTextArea.renderTextArea();\n\n        _this.focus();\n      });\n\n      resolveOnChange(_this.resizableTextArea.textArea, e, _this.props.onChange);\n    };\n\n    _this.renderTextArea = function (prefixCls) {\n      return React.createElement(ResizableTextArea, _extends({}, _this.props, {\n        prefixCls: prefixCls,\n        onKeyDown: _this.handleKeyDown,\n        onChange: _this.handleChange,\n        ref: _this.saveTextArea\n      }));\n    };\n\n    _this.renderComponent = function (_ref) {\n      var getPrefixCls = _ref.getPrefixCls;\n      var value = _this.state.value;\n      var customizePrefixCls = _this.props.prefixCls;\n      var prefixCls = getPrefixCls('input', customizePrefixCls);\n      return React.createElement(ClearableLabeledInput, _extends({}, _this.props, {\n        prefixCls: prefixCls,\n        inputType: \"text\",\n        value: fixControlledValue(value),\n        element: _this.renderTextArea(prefixCls),\n        handleReset: _this.handleReset,\n        ref: _this.saveClearableInput\n      }));\n    };\n\n    var value = typeof props.value === 'undefined' ? props.defaultValue : props.value;\n    _this.state = {\n      value: value\n    };\n    return _this;\n  }\n\n  _createClass(TextArea, [{\n    key: \"setValue\",\n    value: function setValue(value, callback) {\n      if (!('value' in this.props)) {\n        this.setState({\n          value: value\n        }, callback);\n      }\n    }\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      this.resizableTextArea.textArea.focus();\n    }\n  }, {\n    key: \"blur\",\n    value: function blur() {\n      this.resizableTextArea.textArea.blur();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(ConfigConsumer, null, this.renderComponent);\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps) {\n      if ('value' in nextProps) {\n        return {\n          value: nextProps.value\n        };\n      }\n\n      return null;\n    }\n  }]);\n\n  return TextArea;\n}(React.Component);\n\npolyfill(TextArea);\nexport default TextArea;","map":{"version":3,"mappings":"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","names":["React","polyfill","ClearableLabeledInput","ResizableTextArea","ConfigConsumer","fixControlledValue","resolveOnChange","TextArea","props","_classCallCheck","_this","saveTextArea","resizableTextArea","saveClearableInput","clearableInput","handleChange","e","setValue","target","value","resizeTextarea","textArea","onChange","handleKeyDown","onPressEnter","onKeyDown","keyCode","handleReset","renderTextArea","focus","prefixCls","ref","renderComponent","getPrefixCls","state","customizePrefixCls","inputType","element","defaultValue","callback","setState","blur","nextProps","Component"],"sources":["input/TextArea.jsx"],"sourcesContent":["import * as React from 'react';\nimport { polyfill } from 'react-lifecycles-compat';\nimport ClearableLabeledInput from './ClearableLabeledInput';\nimport ResizableTextArea from './ResizableTextArea';\nimport { ConfigConsumer } from '../config-provider';\nimport { fixControlledValue, resolveOnChange } from './Input';\nclass TextArea extends React.Component {\n    constructor(props) {\n        super(props);\n        this.saveTextArea = (resizableTextArea) => {\n            this.resizableTextArea = resizableTextArea;\n        };\n        this.saveClearableInput = (clearableInput) => {\n            this.clearableInput = clearableInput;\n        };\n        this.handleChange = (e) => {\n            this.setValue(e.target.value, () => {\n                this.resizableTextArea.resizeTextarea();\n            });\n            resolveOnChange(this.resizableTextArea.textArea, e, this.props.onChange);\n        };\n        this.handleKeyDown = (e) => {\n            const { onPressEnter, onKeyDown } = this.props;\n            if (e.keyCode === 13 && onPressEnter) {\n                onPressEnter(e);\n            }\n            if (onKeyDown) {\n                onKeyDown(e);\n            }\n        };\n        this.handleReset = (e) => {\n            this.setValue('', () => {\n                this.resizableTextArea.renderTextArea();\n                this.focus();\n            });\n            resolveOnChange(this.resizableTextArea.textArea, e, this.props.onChange);\n        };\n        this.renderTextArea = (prefixCls) => {\n            return (<ResizableTextArea {...this.props} prefixCls={prefixCls} onKeyDown={this.handleKeyDown} onChange={this.handleChange} ref={this.saveTextArea}/>);\n        };\n        this.renderComponent = ({ getPrefixCls }) => {\n            const { value } = this.state;\n            const { prefixCls: customizePrefixCls } = this.props;\n            const prefixCls = getPrefixCls('input', customizePrefixCls);\n            return (<ClearableLabeledInput {...this.props} prefixCls={prefixCls} inputType=\"text\" value={fixControlledValue(value)} element={this.renderTextArea(prefixCls)} handleReset={this.handleReset} ref={this.saveClearableInput}/>);\n        };\n        const value = typeof props.value === 'undefined' ? props.defaultValue : props.value;\n        this.state = {\n            value,\n        };\n    }\n    static getDerivedStateFromProps(nextProps) {\n        if ('value' in nextProps) {\n            return {\n                value: nextProps.value,\n            };\n        }\n        return null;\n    }\n    setValue(value, callback) {\n        if (!('value' in this.props)) {\n            this.setState({ value }, callback);\n        }\n    }\n    focus() {\n        this.resizableTextArea.textArea.focus();\n    }\n    blur() {\n        this.resizableTextArea.textArea.blur();\n    }\n    render() {\n        return <ConfigConsumer>{this.renderComponent}</ConfigConsumer>;\n    }\n}\npolyfill(TextArea);\nexport default TextArea;\n"]},"metadata":{},"sourceType":"module"}